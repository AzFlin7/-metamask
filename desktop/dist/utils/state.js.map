{"version":3,"file":"state.js","sourceRoot":"","sources":["../../src/utils/state.ts"],"names":[],"mappings":";;;AACA,wCAAqC;AAE9B,MAAM,WAAW,GAAG,KAAK,IAAuB,EAAE;IACvD,OAAO,CAAC,MAAM,iBAAO,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,EAAE,CAAQ,CAAC;AACpD,CAAC,CAAC;AAFW,QAAA,WAAW,eAEtB;AAEK,MAAM,eAAe,GAAG,KAAK,IAA2B,EAAE;IAC/D,MAAM,KAAK,GAAG,MAAM,IAAA,mBAAW,GAAE,CAAC;IAClC,OAAO,KAAK,CAAC,IAAI,EAAE,iBAAiB,IAAI,EAAE,CAAC;AAC7C,CAAC,CAAC;AAHW,QAAA,eAAe,mBAG1B;AAEK,MAAM,wBAAwB,GAAG,KAAK,EAC3C,YAA0B,EACP,EAAE;IACrB,MAAM,KAAK,GAAG,MAAM,IAAA,mBAAW,GAAE,CAAC;IAClC,MAAM,mBAAmB,GAAG,KAAK,CAAC,IAAI,CAAC,iBAAiB,CAAC;IAEzD,KAAK,CAAC,IAAI,CAAC,iBAAiB,GAAG,EAAE,GAAG,mBAAmB,EAAE,GAAG,YAAY,EAAE,CAAC;IAE3E,OAAO,KAAK,CAAC;AACf,CAAC,CAAC;AATW,QAAA,wBAAwB,4BASnC;AAEK,MAAM,WAAW,GAAG,KAAK,EAAE,KAAe,EAAE,EAAE;IACnD,MAAM,iBAAO,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACzC,CAAC,CAAC;AAFW,QAAA,WAAW,eAEtB;AAEK,MAAM,eAAe,GAAG,KAAK,EAAE,YAA0B,EAAE,EAAE;IAClE,MAAM,KAAK,GAAG,MAAM,IAAA,gCAAwB,EAAC,YAAY,CAAC,CAAC;IAC3D,MAAM,IAAA,mBAAW,EAAC,KAAK,CAAC,CAAC;AAC3B,CAAC,CAAC;AAHW,QAAA,eAAe,mBAG1B;AAEK,MAAM,aAAa,GAAG,KAAK,IAAI,EAAE;IACtC,MAAM,iBAAO,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;AACtC,CAAC,CAAC;AAFW,QAAA,aAAa,iBAExB;AAEK,MAAM,uBAAuB,GAAG,KAAK,EAC1C,KAAe,EACI,EAAE;IACrB,MAAM,oBAAoB,GAAG,MAAM,IAAA,uBAAe,GAAE,CAAC;IAErD,OAAO;QACL,GAAG,KAAK;QACR,IAAI,EAAE;YACJ,GAAG,KAAK,CAAC,IAAI;YACb,iBAAiB,EAAE;gBACjB,GAAG,KAAK,CAAC,IAAI,EAAE,iBAAiB;gBAChC,UAAU,EAAE,oBAAoB,CAAC,UAAU;gBAC3C,cAAc,EAAE,oBAAoB,CAAC,cAAc;aACpD;SACF;KACF,CAAC;AACJ,CAAC,CAAC;AAhBW,QAAA,uBAAuB,2BAgBlC;AAEK,MAAM,4BAA4B,GAAG,CAAC,KAAe,EAAE,EAAE;IAC9D,OAAO;QACL,GAAG,KAAK;QACR,IAAI,EAAE;YACJ,GAAG,KAAK,CAAC,IAAI;YACb,iBAAiB,EAAE;gBACjB,GAAG,KAAK,CAAC,IAAI,CAAC,iBAAiB;gBAC/B,UAAU,EAAE,SAAS;gBACrB,cAAc,EAAE,SAAS;aAC1B;SACF;KACF,CAAC;AACJ,CAAC,CAAC;AAZW,QAAA,4BAA4B,gCAYvC","sourcesContent":["import { DesktopState, RawState } from '../types';\nimport { browser } from '../browser';\n\nexport const getRawState = async (): Promise<RawState> => {\n  return (await browser.storage.local.get()) as any;\n};\n\nexport const getDesktopState = async (): Promise<DesktopState> => {\n  const state = await getRawState();\n  return state.data?.DesktopController || {};\n};\n\nexport const getAndUpdateDesktopState = async (\n  desktopState: DesktopState,\n): Promise<RawState> => {\n  const state = await getRawState();\n  const currentDesktopState = state.data.DesktopController;\n\n  state.data.DesktopController = { ...currentDesktopState, ...desktopState };\n\n  return state;\n};\n\nexport const setRawState = async (state: RawState) => {\n  await browser.storage.local.set(state);\n};\n\nexport const setDesktopState = async (desktopState: DesktopState) => {\n  const state = await getAndUpdateDesktopState(desktopState);\n  await setRawState(state);\n};\n\nexport const clearRawState = async () => {\n  await browser.storage.local.clear();\n};\n\nexport const addPairingKeyToRawState = async (\n  state: RawState,\n): Promise<RawState> => {\n  const existingDeskotpState = await getDesktopState();\n\n  return {\n    ...state,\n    data: {\n      ...state.data,\n      DesktopController: {\n        ...state.data?.DesktopController,\n        pairingKey: existingDeskotpState.pairingKey,\n        pairingKeyHash: existingDeskotpState.pairingKeyHash,\n      },\n    },\n  };\n};\n\nexport const removePairingKeyFromRawState = (state: RawState) => {\n  return {\n    ...state,\n    data: {\n      ...state.data,\n      DesktopController: {\n        ...state.data.DesktopController,\n        pairingKey: undefined,\n        pairingKeyHash: undefined,\n      },\n    },\n  };\n};\n"]}